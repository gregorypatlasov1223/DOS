Turbo Assembler	 Version 4.1	    02/18/26 22:07:16	    Page 1
my_frame.asm



      1	0000			     .model tiny
      2	0000			     .code
      3				     org 100h
      4	      =001E		     x_offset				= 30d
      5	      =00A0		     length_of_terminal_string		= 80d*2h ; length of terminal string
      6	      =0028		     length_of_horizontal_part_of_frame	= 40d	 ; length of horizontal	border
      7
      8
      9	      =B800		     VIDEOSEG	     equ 0B800h
     10
     11	0100  B8 B800		     start:	     mov ax, VIDEOSEG
     12	0103  8E C0				     mov es, ax
     13
     14	0105  BE 0005				     mov si, 5h					; 5h = number strings to skip
     15	0108  B9 0028				     mov cx, length_of_horizontal_part_of_frame	; length of the	border
     16	010B  BF 0005				     mov di, 5d					; number border's strings
     17
     18	010E  E8 004C				     call CalculateCoordinates
     19	0111  E8 0077				     call PrintHorizontalPartOfFrame
     20
     21	0114			     print_vertical_part_of_frame:
     22	0114  83 FF 00				     cmp di, 00d
     23	0117  74 35				     je	 end_of_program
     24	0119  4F				     dec di
     25	011A  46				     inc si
     26	011B  E8 003F				     call CalculateCoordinates
     27	011E  EB 01 90				     jmp one_vertical_part_of_frame
     28
     29	0121			     one_vertical_part_of_frame:
     30	0121  83 F9 28				     cmp cx, length_of_horizontal_part_of_frame
     31	0124  74 14				     je	 print_one_vertical_part_of_frame
     32	0126  83 FF 02				     cmp di, 2
     33	0129  74 17				     je	 second_conditional
     34	012B			     back3:
     35	012B  83 C3 02				     add bx, 2h
     36	012E  E2 F1				     loop one_vertical_part_of_frame
     37
     38	0130  B9 0028				     mov cx, length_of_horizontal_part_of_frame
     39	0133  26: C7 07	0DBA			     mov es:[bx], 0DBAh	     ; print "||" (bright magenta on black)
     40	0138  EB DA				     jmp print_vertical_part_of_frame
     41
     42	013A			     print_one_vertical_part_of_frame:
     43	013A  26: C7 07	0DBA			     mov es:[bx], 0DBAh	     ; (bright magenta on black)
     44	013F  49				     dec cx
     45	0140  EB DF				     jmp one_vertical_part_of_frame
     46
     47	0142			     second_conditional:
     48	0142  83 F9 18				     cmp cx, 18h	     ; from which value	start print terminal string
     49	0145  74 02				     je	 print_string_length
     50	0147  EB E2				     jmp back3
     51
     52	0149			     print_string_length:
     53	0149  E8 001C				     call PrintString
     54	014C  EB D3				     jmp one_vertical_part_of_frame
     55
     56	014E			     end_of_program:
     57	014E  46				     inc si
Turbo Assembler	 Version 4.1	    02/18/26 22:07:16	    Page 2
my_frame.asm



     58	014F  E8 000B				     call CalculateCoordinates
     59	0152  B9 0028				     mov cx, length_of_horizontal_part_of_frame
     60	0155  E8 0033				     call PrintHorizontalPartOfFrame
     61
     62	0158  B8 4C00				     mov ax, 4c00h
     63	015B  CD 21				     int 21h
     64
     65				     ;------------------------------------------------------------------------
     66				     ; Calculate Coordinates of	videomemory in registrs	BX and SI
     67				     ; Expect: BX, SI
     68				     ; Exit:   BX - calculated index
     69				     ; Destr:  AX
     70				     ;-------------------------------------------------------------------------
     71	015D			     CalculateCoordinates proc
     72	015D  B8 00A0				     mov ax, length_of_terminal_string
     73	0160  F7 E6				     mul si
     74	0162  8B D8				     mov bx, ax
     75	0164  83 C3 1E				     add bx, x_offset
     76	0167  C3				     ret
     77	0168					     endp
     78
     79				     ;---------------------------------------------------------------------------
     80				     ;Print: terminal string (length = ds:[80h]) begin from [82h]
     81				     ;Entry: no
     82				     ;Exit:  no
     83				     ;Destr: CX(++), BX	(+=2), AX
     84				     ;---------------------------------------------------------------------------
     85	0168			     PrintString proc
     86	0168  51				     push cx
     87	0169  56				     push si
     88	016A  53				     push bx
     89	016B  33 C9				     xor cx, cx
     90	016D  8A 0E 0080			     mov cl, ds:[80h]
     91	0171  FE C9				     dec cl ; dont need	last symbol = '<enter>'
     92	0173  BE 0082				     mov si, 82h
     93
     94	0176			     horizontal_string:
     95	0176  8A 04				     mov al, [si]
     96	0178  B4 0B				     mov ah, 0Bh	    ; bright cyan on black
     97	017A  26: 89 07				     mov es:[bx], ax
     98	017D  83 C3 02				     add bx, 2h
     99	0180  46				     inc si
    100	0181  E2 F3				     loop horizontal_string
    101
    102	0183  5B				     pop bx
    103	0184  5E				     pop si
    104	0185  59				     pop cx
    105	0186  49				     dec cx
    106	0187  83 C3 02				     add bx, 2h
    107	018A  C3				     ret
    108	018B					     endp
    109
    110				     ;-------------------------------------------------------------------------
    111				     ; Print horizontal	border length <cx> to videomemory [bx]
    112				     ; Expect: CX - length of border
    113				     ;	       BX - adress from	which border was writted
    114				     ; Exit:   nothing
Turbo Assembler	 Version 4.1	    02/18/26 22:07:16	    Page 3
my_frame.asm



    115				     ; Destr:  BX
    116				     ;--------------------------------------------------------------------------
    117	018B			     PrintHorizontalPartOfFrame	proc
    118	018B  51				     push cx
    119	018C			     horizontal_frame:
    120	018C  83 FF 05				     cmp di, 5d
    121	018F  74 08				     je	 upper_corner
    122	0191  83 FF 00				     cmp di, 0h
    123	0194  74 20				     je	 bottom_corner
    124	0196			     next:
    125	0196  EB 3B 90				     jmp next2
    126
    127	0199			     upper_corner:
    128	0199  83 F9 28				     cmp cx, length_of_horizontal_part_of_frame
    129	019C  74 08				     je	 left_upper_corner
    130	019E  83 F9 01				     cmp cx, 1d
    131	01A1  74 0B				     je	 right_upper_corner
    132	01A3  EB 2E 90				     jmp next2
    133
    134	01A6			     left_upper_corner:
    135	01A6  26: C7 07	0DC9			     mov es:[bx], 0DC9h	; print	left up	corner (magenta)
    136	01AB  EB 2B 90				     jmp next3
    137
    138	01AE			     right_upper_corner:
    139	01AE  26: C7 07	0DBB			     mov es:[bx], 0DBBh	; print	right bottom corner (magenta)
    140	01B3  EB 23 90				     jmp next3
    141
    142	01B6			     bottom_corner:
    143	01B6  83 F9 28				     cmp cx, length_of_horizontal_part_of_frame
    144	01B9  74 08				     je	 left_back_corner
    145	01BB  83 F9 01				     cmp cx, 1d
    146	01BE  74 0B				     je	 right_back_corner
    147	01C0  EB 11 90				     jmp next2
    148
    149	01C3			     left_back_corner:
    150	01C3  26: C7 07	0DC8			     mov es:[bx], 0DC8h	; print	left up	corner (magenta)
    151	01C8  EB 0E 90				     jmp next3
    152
    153	01CB			     right_back_corner:
    154	01CB  26: C7 07	0DBC			     mov es:[bx], 0DBCh	; print	left bottom corner (magenta)
    155	01D0  EB 06 90				     jmp next3
    156
    157	01D3			     next2:
    158	01D3  26: C7 07	0DCD			     mov es:[bx], 0DCDh	; print	'=' (magenta)
    159	01D8			     next3:
    160	01D8  83 C3 02				     add bx, 2h
    161	01DB  E2 AF				     loop horizontal_frame
    162	01DD  59				     pop cx
    163	01DE  C3				     ret
    164	01DF					     endp
    165
    166				     end start
Turbo Assembler	 Version 4.1	    02/18/26 22:07:16	    Page 4
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/18/26"
??FILENAME			  Text	 "my_frame"
??TIME				  Text	 "22:07:16"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 MY_FRAME
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
BACK3				  Near	 DGROUP:012B
BOTTOM_CORNER			  Near	 DGROUP:01B6
CALCULATECOORDINATES		  Near	 DGROUP:015D
END_OF_PROGRAM			  Near	 DGROUP:014E
HORIZONTAL_FRAME		  Near	 DGROUP:018C
HORIZONTAL_STRING		  Near	 DGROUP:0176
LEFT_BACK_CORNER		  Near	 DGROUP:01C3
LEFT_UPPER_CORNER		  Near	 DGROUP:01A6
LENGTH_OF_HORIZONTAL_PART_OF_FRA  Number 0028
ME
LENGTH_OF_TERMINAL_STRING	  Number 00A0
NEXT				  Near	 DGROUP:0196
NEXT2				  Near	 DGROUP:01D3
NEXT3				  Near	 DGROUP:01D8
ONE_VERTICAL_PART_OF_FRAME	  Near	 DGROUP:0121
PRINTHORIZONTALPARTOFFRAME	  Near	 DGROUP:018B
PRINTSTRING			  Near	 DGROUP:0168
PRINT_ONE_VERTICAL_PART_OF_FRAME  Near	 DGROUP:013A
PRINT_STRING_LENGTH		  Near	 DGROUP:0149
PRINT_VERTICAL_PART_OF_FRAME	  Near	 DGROUP:0114
RIGHT_BACK_CORNER		  Near	 DGROUP:01CB
RIGHT_UPPER_CORNER		  Near	 DGROUP:01AE
SECOND_CONDITIONAL		  Near	 DGROUP:0142
START				  Near	 DGROUP:0100
UPPER_CORNER			  Near	 DGROUP:0199
VIDEOSEG			  Number B800
X_OFFSET			  Number 001E

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  01DF Word	  Public  CODE
